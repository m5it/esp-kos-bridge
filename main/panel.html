<html>
<head>
<title>Welcome To ESP-KOS-BRIDGE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
label {
	font-weight:bolder;
}
label:after {
	clear:both;
	display:block;
}

.clearfix:after {clear: both;content: ".";display: block;font-size: 0;height: 0;line-height: 0;visibility: hidden;}
.clearfix { display: inline-block; }
* html .clearfix { height: 1%; }
.clearfix { display: block; }
</style>
<script>
function qS(s) {return document.querySelector(s);}
function Fetch( opt ) {
	var href="";
	if( typeof(opt)!='undefined' && typeof(opt['href'])!='undefined' ) {
		href = opt.href;
	}
	else return;
	//
	fetch(href+(href.match(/\?/i)?"&":"?"), {  
	    method :'GET',
	    cache:'no-store',
	    headers:new Headers({'content-type': 'application/json'}), 
    }).then(function (data) {
		return data.json();
	}).then(function(json) {
		console.info("response",json);
		//
		if( typeof(opt)!='undefined' && typeof(opt["onDone"])=='function' ) {
			opt.onDone( json );
		}
		else {
			console.info("Fetch() opt.onDone() not defined!",json);
		}
	}).catch(function(E) {
		console.warn("Fetch() ERROR: ",E);
	});
}
//
function infoLoop() {
	//
	Fetch({href:document.location.origin+"/time",onDone:function(json) {
		qS("#displayTime>div").innerText = json.data;
	},});
	//
	Fetch({href:document.location.origin+"/free",onDone:function(json) {
		//qS("#displayFree>div").innerText = json.data+" |Â "+json.start_time+" | "+json.restart_time+" | "+json.restart_count;
		qS("#displayFree>div").innerText = json.data;
	},});
	//
	setTimeout(function() { infoLoop(); },5000);
}
//
window.onload = function() {
	ready();
}
//
function ready() {
	//
	infoLoop();
	//
}
</script>
</head>
<body>

<div id="displayTime" style="float:left;"><label>Server Time</label><div></div></div>
<div id="displayFree" style="float:right;"><label>Server Free</label><div></div></div>
<div class="clearfix"></div>
<div>
    <div>
        <div>
			<label>Define gpio</label>
			<div><input type="text" id="" value=""> Define GPIO for 5W Led.</div>
		</div>
        <div>
			<div style="width:50%;float:left;box-sizing:border-box;">
				<label>Start hour</label>
		        <div>
		        </div>
	        </div>
	        <div style="width:50%;float:left;box-sizing:border-box;">
				<label>End hour</label>
		        <div>
		        </div>
	        </div>
	        <div class="clearfix"></div>
        </div>
    </div>
</div>

</body>
</html>
