<html>
<head>
<title>Welcome To ESP-KOS-BRIDGE</title>
<style>
label {
	font-weight:bolder;
}
label:after {
	clear:both;
	display:block;
}
</style>
<script>
function qS(s) {return document.querySelector(s);}
function Fetch( opt ) {
	var href="";
	if( typeof(opt)!='undefined' && typeof(opt['href'])!='undefined' ) {
		href = opt.href;
	}
	else return;
	//
	fetch(href+(href.match(/\?/i)?"&":"?"), {  
	    method :'GET',
	    cache:'no-store',
	    headers:new Headers({'content-type': 'application/json'}), 
    }).then(function (data) {
		return data.json();
	}).then(function(json) {
		console.info("response",json);
		//
		if( typeof(opt)!='undefined' && typeof(opt["onDone"])=='function' ) {
			opt.onDone( json );
		}
		else {
			console.info("Fetch() opt.onDone() not defined!",json);
		}
	}).catch(function(E) {
		console.warn("Fetch() ERROR: ",E);
	});
}
//
function timeLoop() {
	Fetch({href:document.location.origin+"/time",onDone:function(json) {
		qS("#displayTime>div").innerText = json.data;
	},});
	setTimeout(function() { timeLoop(); },5000);
}
//
window.onload = function() {
	ready();
}
//
function ready() {
	//
	timeLoop();
	//
}
</script>
</head>
<body>

<div id="displayTime"><label>Server time</label><div></div></div>

</body>
</html>
